<!-- Post content goes here -->
<h2>{{ post.title }}</h2>
<p>{{ post.content }}</p>

<!-- Display Tags -->
<p>Tags:
{% for tag in post.tags.all %}
    <a href="{% url 'posts_by_tag' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
{% empty %}
    No tags
{% endfor %}
</p>

<!-- Search Bar -->
<form method="GET" action="{% url 'search_posts' %}">
    <input type="text" name="q" placeholder="Search posts...">
    <button type="submit">Search</button>
</form>

<!-- Comments Section -->
<h3>Comments</h3>
{% for comment in post.comments.all %}
  <p><strong>{{ comment.author.username }}</strong> - {{ comment.created_at|date:"SHORT_DATETIME_FORMAT" }}</p>
  <p>{{ comment.content }}</p>
  {% if comment.author == user %}
    <a href="{% url 'edit_comment' comment.id %}">Edit</a> |
    <a href="{% url 'delete_comment' comment.id %}">Delete</a>
  {% endif %}
  <hr>
{% empty %}
  <p>No comments yet.</p>
{% endfor %}

{% if user.is_authenticated %}
<h4>Add a comment</h4>
<form method="post" action="{% url 'add_comment' post.id %}">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Post Comment</button>
</form>
{% else %}
<p><a href="{% url 'login' %}">Login</a> to comment.</p>
{% endif %}
